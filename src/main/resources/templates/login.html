<html>
<head>
    <title>Original | Login</title>
    <link rel="icon" type="image/png" href="https://i.imgur.com/W6F7QEN.png" sizes="32x32"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="https://assets.original.gg/css/theme.css">
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/MaterialDesign-Webfont/6.2.95/css/materialdesignicons.min.css"
          integrity="sha512-tYefTUoWKpCvU14EKu/b/VxnSaT3+1ZBlL0BhTPSYCiqsMTbGylad3l6HCr9i4vpsDgJIFke+LQBq3MCXko6Qw=="
          crossorigin="anonymous" referrerpolicy="no-referrer"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css"
          integrity="sha512-HK5fgLBL+xu6dm/Ii3z4xhlSUyZgTT9tuc/hSrtw6uzJOvgRr2a9jyxxT1ely+B+xFAmJKVSTbpM/CuL7qxO8w=="
          crossorigin="anonymous"/>
    <link href="https://fonts.googleapis.com/css2?family=Karla:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;1,800&display=swap"
          rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800;900&display=swap"
          rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Kanit:ital,wght@0,800;0,900;1,800&display=swap"
          rel="stylesheet">
</head>
<body>
<div id="page">
    <div class="page-sidebar">
        <div class="nav-content">
            <div id="logo">
                <a href="/"><img src="https://i.imgur.com/5MjoUuh.png"></a>
            </div>
            <div id="sidebar-links">
                <ul>
                    <li class="active"><a href="/"><i class="mdi mdi-home"></i> <span class="text">Home</span></a></li>
                    <li><a href="/staff"><i class="mdi mdi-shield"></i> <span class="text">Staff</a></span></li>
                    <li><a href="/complain"><i class="mdi mdi-alert-circle"></i> <span
                            class="text">Complaints</a></span></li>
                    <li><a href="/unban"><i class="mdi mdi-ticket"></i> <span class="text">Unban Requests</a></span>
                    </li>
                    <li><a href="/bugs"><i class="mdi mdi-bug-outline"></i> <span class="text">Bugs</a></span></li>
                    <li><a href="/rules"><i class="mdi mdi-book-open-variant"></i> <span
                            class="text">Rules</a></span></li>
                    <li><a href="/rules"><i class="mdi mdi-clipboard-list"></i> <span class="text">Entries
                        <!--(Staff Applications, Complains, Unbans, Bugs)--></a></span></li>
                </ul>
            </div>
        </div>
    </div>
    <div class="page-content">
        <div class="page-top-bar">
            <div class="container">
                <div class="left">
                    <a href="https://discord.gg/original" target="_blank"><i class="mdi mdi-discord"></i></a>
                    <a href="https://tiktok.com/@original.gg__official" target="_blank"><i
                            class="fab fa-tiktok"></i></a>
                    <a href="https://instagram.com/original.gg__official/" target="_blank"><i
                            class="mdi mdi-instagram"></i></a>
                    <a href="https://youtube.com/channel/UC3VrKxY8oDM6pldT_kbAgag/featured" target="_blank"><i
                            class="mdi mdi-youtube"></i></a>
                    <a href="https://store.original.gg" target="_blank"><i class="mdi mdi-cart"></i></a>
                    <a href="https://vote.original.gg" target="_blank"><i class="mdi mdi-map-marker-check"></i></a>
                </div>
                <div class="right">
                    <a href="/" class="search-btn"><i class="mdi mdi-magnify"></i></a>
                    <a href="login" class="top-btn login">
                        Login
                    </a>
                </div>
            </div>
        </div>
        <div class="content-wrap">
            <div class="container">
                <h1 class="panel-title">Login</h1>

                <h3 style="color: red" id="login-error">Error message here</h3>

                <div class="panel-form">
                    <div style="display: block; margin-top: 0em; margin-block-end: 1em; width: 100%">
                        <div class="form-group">
                            <label for="login-username">Username</label>
                            <input class="form-control" type="text" id="login-username" name="fname">
                        </div>
                        <div class="form-group">
                            <label for="login-password">Password</label>
                            <input class="form-control" type="password" id="login-password">
                        </div>
                        <div class="form-buttons">
                            <button class="form-button submit" id="login-button-confirm" type="button">Login</button>
                            <button class="form-button cancel">Cancel</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"
        integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script>

    function setCookie(name,value,days) {
        var expires = "";
        if (days) {
            var date = new Date();
            date.setTime(date.getTime() + (days*24*60*60*1000));
            expires = "; expires=" + date.toUTCString();
        }
        document.cookie = name + "=" + (value || "")  + expires + "; path=/";
    }

    function getCookie(name) {
        var nameEQ = name + "=";
        var ca = document.cookie.split(';');
        for(var i=0;i < ca.length;i++) {
            var c = ca[i];
            while (c.charAt(0)==' ') c = c.substring(1,c.length);
            if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
        }
        return null;
    }

    error = document.getElementById("login-error");
    error.hidden = true;

    const input1 = document.getElementById('login-username');
    const input2 = document.getElementById('login-password');
    const button = document.getElementById('login-button-confirm');

    input1.addEventListener("keydown", function (e) {
        console.log("keydown");
        if (e.key === "Enter") {
            console.log("enter")
            login();
        }
    });

    input2.addEventListener("keydown", function (e) {
        console.log("keydown");
        if (e.key === "Enter") {
            console.log("enter")
            login();
        }
    });

    button.addEventListener('click',function f()
    {
        console.log("click")
        login()
    });

    async function login(){
        console.log("Logging in")
        username = document.getElementById("login-username").value;
        password = document.getElementById("login-password").value;

        loginData = {};
        loginData.username = username;
        loginData.password = password;

        var blob;

        blob = await fetch('https://panel.originalnetwork-panel.dev/api/login/v2', {
            method: 'post',
            headers: {
                'Accept': 'application/json',
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(loginData)
        }).then(response => response.blob());
        json = await blob.text();

        try {
            obj = JSON.parse(json);

            if (obj.response !== "200 OK") {
                setCookie("login_data", "", 0);
                error.hidden = false;
                error.innerText = obj.response;
            }

            if (obj.password !== "" && obj.password !== undefined) {
                obj.response = undefined;
                setCookie("login_data", JSON.stringify(obj), 30)
                //document.cookie = JSON.stringify(obj);
                window.location.replace("https://panel.originalnetwork-panel.dev/");
            } else {
                setCookie("login_data", "", 0);
                error.hidden = false;
                error.innerText = obj.response;
            }
        } catch (error) {
            setCookie("login_data", "", 0);
            error.hidden = false;
            error.innerText = obj.response;
        }
    }

</script>
</body>
</html>